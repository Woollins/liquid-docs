<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>

<script>
	(function(){

		// Get the elements.
		// - the 'pre' element.
		// - the 'div' with the 'paste-content' id.
		
		var pre = document.getElementsByTagName('pre');
		var pasteContent = document.getElementById('paste-content');

		// Add a copy button in the 'pre' element.
		// which only has the className of 'language-'.
		
		for (var i = 0; i < pre.length; i++) {
			var isLanguage = pre[i].children[0].className.indexOf('language-');

				var button           = document.createElement('button');
						button.className = 'copy-button';
						button.textContent = 'Copy';

						pre[i].appendChild(button);
		};
		
		// Run Clipboard
		
		var copyCode = new Clipboard('.copy-button', {
			target: function(trigger) {
				return trigger.previousElementSibling;
	    }
		});

		// On success:
		// - Change the "Copy" text to "Copied".
		// - Swap it to "Copy" in 2s.
		
		copyCode.on('success', function(event) {
			event.clearSelection();
			event.trigger.textContent = 'Copied';
			window.setTimeout(function() {
				event.trigger.textContent = 'Copy';
			}, 2000);
		});

		// On error (Safari):
		// - Change the  "Press Ctrl+C to copy"
		// - Swap it to "Copy" in 2s.
		
		copyCode.on('error', function(event) { 
			event.trigger.textContent = 'Press "Ctrl + C" to copy';
			window.setTimeout(function() {
				event.trigger.textContent = 'Copy';
			}, 5000);
		});

	})();
</script>